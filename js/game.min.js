String.prototype.setCharAt = function(index, char) {
	return this.substr(0, index) + char + this.substr(index + 1);
};
var board,height,width,offsetX,offsetY,lastBoard,charXO,charYO,charX,charY,charRot,actionsEnabled=0,moves,pushes,restarts,soko;function goalExists(){for(var a,m=0;m<board.length;m++){a=board[m].indexOf("H");if(-1!==a)return!0;a=board[m].indexOf("I");if(-1!==a)return!0;a=board[m].indexOf("J");if(-1!==a)return!0;a=board[m].indexOf("K");if(-1!==a)return!0}if(-1===a)return!1}
function setupBoard(a){"undefined"===typeof gameData[curPack].levsDone[a]?error("Not unlocked yet!",1):(actions(!0),"Image"!==curRender?clearAll():clearAll2d(),lastBoard=a,board=clone(a),soko=!0===goalExists()?!1:!0,findChar(),height=board.length,width=board.reduce(function(a,c){return a.length>c.length?a:c}).length,offsetX=Math.round(width/2*-10+5),offsetY=Math.round(height/2*10-5),"Image"!==curRender&&(camera.position.z=height>width?10*(height+4):10*(width+4),camera.lookAt(center)),restarts=pushes=
moves=0,updateScores(),fixButtons(),"Image"!==curRender?draw():draw2d())}function clone(a){for(var m=[],c=0;c<packs[curPack].level[a].length;c++)m.push(packs[curPack].level[a][c].slice(0));return m}function allPressed(){for(var a=-1,m=0;m<board.length;m++){a=board[m].indexOf(".");if(-1!==a)return!1;if(-1===a&&m===board.length-1)return!0}}var e;document.onkeydown=checkKey;
function checkKey(a){a=a||window.event;a.keyCode&&(1===actionsEnabled?a.keyCode===keycode.up?("Image"!==curRender?move("up"):move2d("up"),updateScores()):a.keyCode===keycode.down?("Image"!==curRender?move("down"):move2d("down"),updateScores()):a.keyCode===keycode.left?("Image"!==curRender?move("left"):move2d("left"),updateScores()):a.keyCode===keycode.right?("Image"!==curRender?move("right"):move2d("right"),updateScores()):a.keyCode===keycode.restart?("Image"!==curRender?resetBoard():resetBoard2d(),
updateScores()):a.keyCode===keycode.pause&&pause():1===setKeyAction?27!==a.keyCode&&saveKeycode(a.keyCode):27===a.keyCode?!0===theresError?!0===canCloseError&&errHide():unNav():a.keyCode===keycode.pause&&!0===isPaused&&unpause())}
function findChar(){for(var a=0;a<board.length;a++){charY=a;charX=board[a].indexOf("@");if(-1!==charX){charXO=charX;charYO=charY;break}charX=board[a].indexOf("^");if(-1!==charX){charXO=charX;charYO=charY;break}charX=board[a].indexOf("+");if(-1!==charX){charXO=charX;charYO=charY;break}}}var crateBlocks=[],buttonBlocks=[],addedCon,addedWat,addedBut,addedDet,barrels=[],tables=[];
function resetBoard(){document.getElementById("ref").className="";setTimeout(function(){document.getElementById("ref").className="anim"},15);for(var a=0;a<crateBlocks.length;a++)scene.remove(crateBlocks[a]);crateBlocks=[];board=clone(lastBoard);(function(){function a(g,b,c){crateBlocks.push(crate.clone());crateBlocks[crateBlocks.length-1].position.set(10*g+offsetX,-10*b+offsetY,10*c-.5);crateBlocks[crateBlocks.length-1].name=g+","+b+","+c;scene.add(crateBlocks[crateBlocks.length-1])}for(var c=0;c<
board.length;c++)for(var f=0;f<board[c].length;f++){var k=board[c][f];"!"!==k&&"^"!==k&&"`"!==k||a(f,c,0);"$"!==k&&"*"!==k&&"!"!==k||a(f,c,1)}})();!1===soko&&(!0===allPressed()?(doorOpen.visible=!0,doorClose.visible=!1):(doorOpen.visible=!1,doorClose.visible=!0));charX=charXO;charY=charYO;charMesh.position.set(10*charX+offsetX,-10*charY+offsetY,10);optimY=-10*charY+offsetY;optimX=10*charX+offsetX;0===charX?charMesh.rotation.set(0,0,0):charY===board.length-1?charMesh.rotation.set(0,0,.5*Math.PI):charX===
board[0].length-1?charMesh.rotation.set(0,0,Math.PI):charMesh.rotation.set(0,0,-.5*Math.PI);pushes=moves=isRoted=rotDiff=0;restarts+=1;render()}
function clearAll(){charMesh.visible=!1;doorClose.visible=!1;doorOpen.visible=!1;doorCloseDec&&scene.remove(doorCloseDec);for(var a=0;a<crateBlocks.length;a++)scene.remove(crateBlocks[a]);for(a=0;a<buttonBlocks.length;a++)scene.remove(buttonBlocks[a]);for(a=0;a<barrels.length;a++)scene.remove(barrels[a]);for(a=0;a<tables.length;a++)scene.remove(tables[a]);scene.remove(addedCon);scene.remove(addedWat);scene.remove(addedBut);scene.remove(addedDet);crateBlocks=[];buttonBlocks=[];barrels=[];tables=[]}
function draw(){function a(a,b){0===charY?charMesh.rotation.set(0,0,-.5*Math.PI):0===charX?charMesh.rotation.set(0,0,0):charY===board.length-1?charMesh.rotation.set(0,0,.5*Math.PI):charX===board[0].length-1&&charMesh.rotation.set(0,0,Math.PI);charMesh.position.set(10*a+offsetX,-10*b+offsetY,10);optimY=-10*b+offsetY;optimX=10*a+offsetX;isRoted=rotDiff=0;charMesh.visible=!0}function m(a,b,d){doorClose.position.set(10*a+offsetX,-10*b+offsetY+10,5);0===d?(doorClose.rotation.z=Math.PI,doorClose.position.x+=
5,doorClose.position.y+=-15):3===d?(doorClose.rotation.z=-.5*Math.PI,doorClose.position.x+=5,doorClose.position.y+=-5):2===d?(doorClose.rotation.z=0,doorClose.position.x+=-5,doorClose.position.y+=-5):1===d&&(doorClose.rotation.z=.5*Math.PI,doorClose.position.x+=-5,doorClose.position.y+=-15);doorClose.visible=!1}function c(a,b,d){doorOpen.position.set(10*a+offsetX,-10*b+offsetY+10,5);0===d?(doorOpen.rotation.z=Math.PI,doorOpen.position.x+=5,doorOpen.position.y+=-15):3===d?(doorOpen.rotation.z=-.5*
Math.PI,doorOpen.position.x+=5,doorOpen.position.y+=-5):2===d?(doorOpen.rotation.z=0,doorOpen.position.x+=-5,doorOpen.position.y+=-5):1===d&&(doorOpen.rotation.z=.5*Math.PI,doorOpen.position.x+=-5,doorOpen.position.y+=-15);doorOpen.visible=!1}function f(a,b,d){doorCloseDec.position.set(10*a+offsetX,-10*b+offsetY+10,5);0===d?(doorCloseDec.rotation.z=Math.PI,doorCloseDec.position.x+=5,doorCloseDec.position.y+=-15):3===d?(doorCloseDec.rotation.z=-.5*Math.PI,doorCloseDec.position.x+=5,doorCloseDec.position.y+=
-5):2===d?(doorCloseDec.rotation.z=0,doorCloseDec.position.x+=-5,doorCloseDec.position.y+=-5):1===d&&(doorCloseDec.rotation.z=.5*Math.PI,doorCloseDec.position.x+=-5,doorCloseDec.position.y+=-15);scene.add(doorCloseDec)}function k(a,b){var d=butGeo.clone();d.applyMatrix((new THREE.Matrix4).makeTranslation(10*a+offsetX,-10*b+offsetY,5.05));w.merge(d);d=detGeo.clone();d.applyMatrix((new THREE.Matrix4).makeTranslation(10*a+offsetX,-10*b+offsetY,9.6));x.merge(d)}function g(a,b,d){var c=floorGeo.clone();
c.applyMatrix((new THREE.Matrix4).makeTranslation(10*a+offsetX,-10*b+offsetY,10*d));r.merge(c)}function b(a,b){var d=waterGeo.clone();d.applyMatrix((new THREE.Matrix4).makeTranslation(10*a+offsetX,-10*b+offsetY,3));l.merge(d);g(a,b,-1)}function n(a,b,d){crateBlocks.push(crate.clone());crateBlocks[crateBlocks.length-1].position.set(10*a+offsetX,-10*b+offsetY,10*d-.5);crateBlocks[crateBlocks.length-1].name=a+","+b+","+d;scene.add(crateBlocks[crateBlocks.length-1])}function p(a,b,d){barrels.push(barCloners[d].clone());
barrels[barrels.length-1].position.set(10*a+offsetX,-10*b+offsetY,5);scene.add(barrels[barrels.length-1])}function q(a,b,d,c){tables.push(tabCloners[d].clone());"horiz"===c?(tables[tables.length-1].rotation.set(0,0,.5*Math.PI),tables[tables.length-1].position.set(10*a+offsetX+5,-10*b+offsetY,5)):"vert"===c&&tables[tables.length-1].position.set(10*a+offsetX,-10*b+offsetY-5,5);scene.add(tables[tables.length-1])}function h(a,b,d){var c;0===d?c=poleGeo.clone():1===d?(c=wallGeo.clone(),c.applyMatrix((new THREE.Matrix4).makeRotationZ(.5*
Math.PI))):2===d&&(c=wallGeo.clone());c.applyMatrix((new THREE.Matrix4).makeTranslation(10*a+offsetX,-10*b+offsetY,15));r.merge(c)}for(var l=new THREE.Geometry,r=new THREE.Geometry,w=new THREE.Geometry,x=new THREE.Geometry,u,s=0;s<board.length;s++)for(var t=0;t<board[s].length;t++){var d=board[s].charAt(t);" "!==d&&"_"!==d&&"$"!==d&&"@"!==d||g(t,s,0);if("!"===d||"^"===d||"`"===d||"~"===d)b(t,s),"!"!==d&&"^"!==d&&"`"!==d||n(t,s,0);if("."===d||"+"===d||"*"===d)g(t,s,0),k(t,s);"@"!==d&&"^"!==d&&"+"!==
d||a(t,s);"$"!==d&&"*"!==d&&"!"!==d||n(t,s,1);if("H"===d||"I"===d||"J"===d||"K"===d)"H"===d&&(u=0),"I"===d&&(u=1),"J"===d&&(u=2),"K"===d&&(u=3),m(t,s,u),c(t,s,u);if(!0===toggles.decor&&"WebGL"===curRender){if("A"===d||"B"===d||"C"===d||"D"===d)"A"===d&&(u=0),"B"===d&&(u=1),"C"===d&&(u=2),"D"===d&&(u=3),f(t,s,u);"%"===d&&g(t,s,0);var v;if("1"===d||"2"===d||"3"===d||"4"===d||"5"===d||"6"===d||"7"===d)u=Number(d)-1,p(t,s,u),g(t,s,0);else if("U"===d||"V"===d||"W"===d)"U"===d&&(v=0),"V"===d&&(v=1),"W"===
d&&(v=2),q(t,s,v,"vert"),g(t,s,0);else if("X"===d||"Y"===d||"Z"===d)"X"===d&&(v=0),"Y"===d&&(v=1),"Z"===d&&(v=2),q(t,s,v,"horiz"),g(t,s,0);else if(":"===d||"-"===d||"?"===d)":"===d&&(v=0),"-"===d&&(v=1),"?"===d&&(v=2),h(t,s,v),g(t,s,0)}}!1===soko&&(!0===allPressed()?(doorOpen.visible=!0,doorClose.visible=!1):(doorOpen.visible=!1,doorClose.visible=!0));addedCon=new THREE.Mesh(r,conMat);addedWat=new THREE.Mesh(l,waterMat);!1===soko?(addedBut=new THREE.Mesh(w,butMatA),addedDet=new THREE.Mesh(x,detMatA)):
(addedBut=new THREE.Mesh(w,butMatB),addedDet=new THREE.Mesh(x,detMatB));scene.add(addedCon);scene.add(addedWat);scene.add(addedBut);scene.add(addedDet);render()}var optimX,optimY,curRot,rotDiff,isRoted;
function move(a){function m(){"^"===r?r="`":"@"===r?r=" ":"+"===r&&(r=".")}function c(){if("$"===h||" "===h)h="@",charX=p,charY=b;else if("`"===h||"!"===h)h="^",charX=p,charY=b;else if("."===h||"*"===h)h="+",charX=p,charY=b;moves+=1}function f(){var a=q+","+n,c=scene.getObjectByName(p+","+b+",1");c.position.x=w;c.position.y=x;"`"===l?(l="!",c.name=a+",1"):" "===l?(l="$",c.name=a+",1"):"."===l?(l="*",c.name=a+",1"):"~"===l&&(l="`",c.position.z+=-10,c.name=a+",0");pushes+=1}charMesh.rotation.z===2*
Math.PI?charMesh.rotation.z=0:charMesh.rotation.z===-.5*Math.PI?charMesh.rotation.z=1.5*Math.PI:charMesh.rotation.z===-1*Math.PI?charMesh.rotation.z=Math.PI:charMesh.rotation.z===-1.5*Math.PI&&(charMesh.rotation.z=.5*Math.PI);isRoted=0;var k=charX,g=charY,b,n,p,q;if("up"===a)charRot=.5,b=g-1,n=g-2,q=p=k;else if("down"===a)charRot=1.5,b=g+1,n=g+2,q=p=k;else if("left"===a)charRot=1,n=b=g,p=k-1,q=k-2;else if("right"===a)charRot=0,n=b=g,p=k+1,q=k+2;else{error("That's not a direction!",1);return}curRot=
Math.round(charMesh.rotation.z/Math.PI*1E3)/1E3;rotDiff=Math.round(1E3*(charRot-curRot))/1E3;1<rotDiff?rotDiff-=2:-1>rotDiff&&(rotDiff+=2);var h=null,l=null,r=board[g].charAt(k);if("undefined"!==typeof board[b]&&"undefined"!==typeof board[b][p]){h=board[b].charAt(p);"undefined"!==typeof board[n]&&"undefined"!==typeof board[n][q]&&(l=board[n].charAt(q));var w=10*q+offsetX,x=-10*n+offsetY;if("undefined"!==typeof h){if("H"!==h&&"I"!==h&&"J"!==h&&"K"!==h||!0!==allPressed())if("`"===h||" "===h||"."===
h)c(),m();else if("$"===h||"!"===h||"*"===h)if("undefined"!==typeof l)if("`"===l||" "===l||"~"===l||"."===l)f(),c(),m();else return;else return;else return;else onWin();board[g]=board[g].setCharAt(k,r);"undefined"!==typeof board[b]&&"undefined"!==typeof board[b][p]&&(board[b]=board[b].setCharAt(p,h),"undefined"!==typeof board[n]&&"undefined"!==typeof board[n][q]&&(board[n]=board[n].setCharAt(q,l)),!0===allPressed()&&"+"!==board[charY].charAt(charX)?!0===soko?onWin():!1===soko&&(doorOpen.visible=!0,
doorClose.visible=!1):!1===soko&&(doorOpen.visible=!1,doorClose.visible=!0),optimX=Math.round(10*charX+offsetX),optimY=Math.round(-10*charY+offsetY),!0===toggles.anim&&"WebGL"===curRender?animate():(charMesh.position.y=optimY,charMesh.position.x=optimX,charMesh.rotation.z=charRot*Math.PI,render()))}}}var lastTime=0,requestAnimationFrame;
function animate(){var a=(new Date).getTime(),m=Math.round(charMesh.position.x),c=Math.round(charMesh.position.y);m!==optimX&&(m<optimX?charMesh.position.x+=1:m>optimX&&(charMesh.position.x+=-1));c!==optimY&&(c<optimY?charMesh.position.y+=1:c>optimY&&(charMesh.position.y+=-1));rotDiff!==isRoted&&(0<rotDiff&&1!==Math.abs(rotDiff)?(charMesh.rotation.z+=.1*Math.PI,isRoted=Math.round(100*(isRoted+.1))/100):0>rotDiff&&1!==rotDiff?(charMesh.rotation.z+=-.1*Math.PI,isRoted=Math.round(100*(isRoted-.1))/100):
1===Math.abs(rotDiff)&&(charMesh.rotation.z+=.125*Math.PI,isRoted=Math.round(1E3*(isRoted+.125))/1E3));if(c!==optimY||m!==optimX||rotDiff!==isRoted)lastTime=a,renderer.render(scene,camera),requestAnimationFrame(function(){animate()})}function clearAll2d(){document.getElementById("twocont").innerHTML=""}var imgsize;
function resetBoard2d(){function a(a,c,f,k,h){g+='<span class="'+a+'" style="width:'+imgsize+"px;height:"+imgsize+"px;top:"+f*imgsize+"px;left:"+c*imgsize+"px;z-index:"+k+';" id="'+h+'"></span>'}document.getElementById("ref").className="";setTimeout(function(){document.getElementById("ref").className="anim"},15);for(var m=/(?:^|\s)box(?:\s|$)/,c=document.getElementById("twocont").getElementsByTagName("span"),f=c.length;f--;)m.test(c[f].className)&&c[f].parentNode.removeChild(c[f]);var k=document.getElementById("twocont"),
g="";board=clone(lastBoard);(function(){for(var b=0;b<board.length;b++)for(var c=0;c<board[b].length;c++){var f=board[b][c];"!"!==f&&"^"!==f&&"`"!==f||a("box",c,b,1,c+"-"+b+"-0");"$"!==f&&"*"!==f&&"!"!==f||a("box",c,b,3,c+"-"+b+"-1")}k.innerHTML+=g})();!1===soko&&(!0===allPressed()?(setVis("tdopened","visible"),setVis("tdclosed","hidden")):(setVis("tdopened","hidden"),setVis("tdclosed","visible")));charX=charXO;charY=charYO;document.getElementById("2dchar").style.left=charXO*imgsize+"px";document.getElementById("2dchar").style.top=
charYO*imgsize+"px";pushes=moves=0;restarts+=1}
function draw2d(){function a(a,b,c,f,g){k+='<span class="'+a+'" style="width:'+imgsize+"px;height:"+imgsize+"px;top:"+c*imgsize+"px;left:"+b*imgsize+"px;z-index:"+f+';"';g&&(k+=' id="'+g+'"');k+="></span>"}function m(a,b,c,f){k+='<span class="color" style="background:'+a+";top:"+c*imgsize+"px;left:"+b*imgsize+"px;width:"+imgsize+"px;height:"+imgsize+"px;z-index:"+f+';"></span>'}var c=document.getElementById("playtwo"),f=document.getElementById("twocont"),k="";imgsize=c.offsetWidth/width<c.offsetHeight/
height?Math.round(c.offsetWidth/width):Math.round(c.offsetHeight/height);128<imgsize&&(imgsize=128);var c=Math.round(height*imgsize),g=Math.round(width*imgsize);f.style.marginLeft=Math.round(-g/2)+"px";f.style.marginTop=Math.round(-c/2)+"px";for(c=0;c<board.length;c++)for(g=0;g<board[c].length;g++){var b=board[c].charAt(g);" "!==b&&"_"!==b&&"$"!==b&&"@"!==b||a("cm",g,c,0);if("!"===b||"^"===b||"`"===b||"~"===b)m("#23ff07",g,c,2),"!"!==b&&"^"!==b&&"`"!==b||a("box",g,c,1,g+"-"+c+"-0");if("."===b||"+"===
b||"*"===b)!1===soko?(a("metA",g,c,0),m("#e32606",g,c,5)):(a("metB",g,c,0),m("#0f61ff",g,c,5));"@"!==b&&"^"!==b&&"+"!==b||a("char",g,c,4,"2dchar");"$"!==b&&"*"!==b&&"!"!==b||a("box",g,c,3,g+"-"+c+"-1");if("H"===b||"I"===b||"J"===b||"K"===b)a("goalR"+b,g,c,0,"tdclosed"),a("goalG"+b,g,c,0,"tdopened")}f.innerHTML=k;!1===soko&&(!0===allPressed()?(setVis("tdopened","visible"),setVis("tdclosed","hidden")):(setVis("tdopened","hidden"),setVis("tdclosed","visible")))}
function move2d(a){function m(){"^"===r?r="`":"@"===r?r=" ":"+"===r&&(r=".")}function c(){if("$"===h||" "===h)h="@",charX=p,charY=b;else if("`"===h||"!"===h)h="^",charX=p,charY=b;else if("."===h||"*"===h)h="+",charX=p,charY=b;moves+=1}function f(){var a=q+"-"+n,c=document.getElementById(p+"-"+b+"-1");c.style.left=w+"px";c.style.top=x+"px";"`"===l?(l="!",c.id=a+"-1"):" "===l?(l="$",c.id=a+"-1"):"."===l?(l="*",c.id=a+"-1"):"~"===l&&(l="`",c.style.zIndex=0,c.id=a+"-0");pushes+=1}var k=charX,g=charY,
b,n,p,q;if("up"===a)b=g-1,n=g-2,q=p=k;else if("down"===a)b=g+1,n=g+2,q=p=k;else if("left"===a)n=b=g,p=k-1,q=k-2;else if("right"===a)n=b=g,p=k+1,q=k+2;else{error("That's not a direction!",1);return}var h=null,l=null,r=board[g].charAt(k);if("undefined"!==typeof board[b]&&"undefined"!==typeof board[b][p]){h=board[b].charAt(p);"undefined"!==typeof board[n]&&"undefined"!==typeof board[n][q]&&(l=board[n].charAt(q));var w=q*imgsize,x=n*imgsize;if("undefined"!==typeof h){if("H"!==h&&"I"!==h&&"J"!==h&&"K"!==
h||!0!==allPressed())if("`"===h||" "===h||"."===h)c(),m();else if("$"===h||"!"===h||"*"===h)if("undefined"!==typeof l)if("`"===l||" "===l||"~"===l||"."===l)f(),c(),m();else return;else return;else return;else onWin();board[g]=board[g].setCharAt(k,r);"undefined"!==typeof board[b]&&"undefined"!==typeof board[b][p]&&(board[b]=board[b].setCharAt(p,h),"undefined"!==typeof board[n]&&"undefined"!==typeof board[n][q]&&(board[n]=board[n].setCharAt(q,l)),!0===allPressed()&&"+"!==board[charY].charAt(charX)?
!0===soko?onWin():!1===soko&&(setVis("tdopened","visible"),setVis("tdclosed","hidden")):!1===soko&&(setVis("tdopened","hidden"),setVis("tdclosed","visible")),optimX=charX*imgsize,optimY=charY*imgsize,a=document.getElementById("2dchar"),a.style.top=optimY+"px",a.style.left=optimX+"px")}}}
function textParse(){function a(){for(var a=0,c=0,b=0;b<f.length;b++)if(!/^\s*;/.test(f[b])&&(/^\s*Title:\s*/.test(f[b])?(p=f[b].replace(/^\s*Title:\s*/,""),h=p.replace(/[^\w\s0-9]/gi,""),a=1):/^\s*Author:\s*/.test(f[b])&&(q=f[b].replace(/^\s*Author:\s*/,""),c=1),1===a&&1===c)){r=b+1;for(var d=1,k=r;k<f.length;k++)/^\s*;/.test(f[k])||(""===f[k]&&1===d?(l+=1,n[l]=0,g[l]=[],d=0):/^[\@\+\$\*\. \#\!\^\`\~\%\:\-\?ABCDHIJKXYZUVW1-7]+$/.test(f[k])&&(g[l].push(f[k]),d=1))}}function m(){for(var a=0;a<f.length;a++)if(!/^\s*;/.test(f[a]))if(-1!==
f[a].indexOf("#")&&/^[\@\+\$\*\. \#]+$/.test(f[a])){r=a;c();break}else k.push(f[a])}function c(){l+=1;n[l]=0;g[l]=[];for(var a=r;a<f.length;a++)if(!/^\s*;/.test(f[a]))if(-1!==f[a].indexOf("#")&&/^[\@\+\$\*\. \#]+$/.test(f[a])){for(var h=f[a].indexOf("#"),k=0;k<h;k++)f[a]=f[a].setCharAt(k,"#");for(k=h=f[a].lastIndexOf("#");k<f[a].length;k++)f[a]=f[a].setCharAt(k,"#");g[l].push(f[a])}else{w=a;b[l]=[];for(a=w;a<f.length;a++)if(!/^\s*;/.test(f[a]))if(-1!==f[a].indexOf("#")&&/^[\@\+\$\*\. \#]+$/.test(f[a])){r=
a;c();break}else b[l].push(f[a]);break}}var f=document.getElementById("addtext").value.split("\n"),k=[],g=[],b=[],n=[],p,q,h,l=-1,r,w;1===parseMaze?a():(p=document.getElementById("addname").value,h=p.replace(/[\s]/gi,""),q=document.getElementById("addauth").value,m());(function(){for(var a=Object.keys(packs),b=0;b<a.length;b++)"custom"+h===a[b]&&(h+="c")})();var x={displayName:p,varName:h,type:"custom",author:q,level:g};custom.push(x);gameData["custom"+h]={isComplete:!1,levsDone:n,Mmoves:[],Mpushes:[],
Mrestarts:[],Pmoves:[],Ppushes:[],Prestarts:[]};console.log(JSON.stringify(x.level));localStorage.gameData=JSON.stringify(gameData);localStorage.custom=JSON.stringify(custom);packs["custom"+h]=custom[custom.length-1];makePacksTable();document.getElementById("addtext").value="; You just added levels! But I guess you can add more.";document.getElementById("addname").value="";document.getElementById("addauth").value="";nav("add","hide")};