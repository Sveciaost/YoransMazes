var charMesh,crate,nTexs={},barCloners=[],tabCloners=[],floorGeo,poleGeo,wallGeo,conMat,waterGeo,waterMat,butGeo,butMatA,butMatB,detGeo,detMatA,detMatB,doorClose,doorOpen,doorCloseDec,center,renderer,camera,scene,controls,curRender,JSONLoader,loadedDecor=0,loadedModels=0,waitingFor,ie=!1,vertCenter=function(){for(var a=document.querySelectorAll("#menu>div, #playing>div, #pages>div, #hudpages>div, #error"),b=window.innerWidth,c=window.innerHeight,d=0;d<a.length;d++){var e=a[d].offsetHeight,f=a[d].offsetWidth;
c>e?(a[d].style.marginTop=-e/2+"px",a[d].style.top="50%"):(a[d].style.marginTop="0px",a[d].style.top="10px");b>f?(a[d].style.marginLeft=-f/2+"px",a[d].style.left="50%"):(a[d].style.marginLeft="0px",a[d].style.left="10px")}};function resized(){if("Image"!==curRender){var a=window.innerWidth-10,b=window.innerHeight-10;camera.aspect=a/b;renderer.setSize(a,b);camera.updateProjectionMatrix();render()}vertCenter()}
function init(){function a(){try{renderer=new THREE.CanvasRenderer}catch(a){"WebGL"===prefRender?(error("Your browser doesn't seem to support the WebGL or canvas renderers. Switched to Image.<br/>(If you don't want to see this again, change your preferred renderer in settings.)",1),b()):"Canvas"===prefRender&&(error("Your browser doesn't seem to support the Canvas renderer. Switched to Image.<br/>(If you don't want to see this again, change your preferred renderer in settings.)",1),b());return}startRender();
canvasLoad();allReady();curRender="Canvas"}function b(){curRender="Image";setDisp("playtwo","block");if(!1===ie){var a=document.getElementsByTagName("head")[0],b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href="image.min.css";a.appendChild(b)}mainMenu()}loadData();if("WebGL"===prefRender)a:{try{renderer=!0===toggles.alias?new THREE.WebGLRenderer({antialias:!0}):new THREE.WebGLRenderer}catch(c){error("Your browser doesn't seem to support WebGL.  Switched to canvas renderer.<br/>(If you don't want to see this again, change your preferred renderer in settings.)",
1);a();break a}startRender();load();!0===toggles.decor?(loadDecor(),waitingFor="both"):waitingFor="main";curRender="WebGL"}else"Canvas"===prefRender?a():b()}
function startRender(){function a(a,b,c,d){e.push(new THREE.DirectionalLight(16777215,d));e[e.length-1].position.set(a,b,c);scene.add(e[e.length-1])}center=new THREE.Vector3(0,0,0);var b=document.getElementById("view"),c=window.innerWidth-10,d=window.innerHeight-10;camera=new THREE.PerspectiveCamera(45,c/d,.1,1E3);scene=new THREE.Scene;scene.add(camera);controls=new THREE.OrbitControls(camera,b);controls.target=center;controls.addEventListener("change",render);controls.noPan=!0;controls.enabled=!1;
camera.position.set(0,-60,100);camera.lookAt(center);renderer.setSize(c,d);b.appendChild(renderer.domElement);b=new THREE.AmbientLight(4210752);scene.add(b);var e=[];a(0,0,50,.9);a(-45,-45,50,.5);a(45,45,-50,.2);b=[["tex/c3.jpg","groundTex"],["tex/side.jpg","boxTex"],["tex/metA.jpg","metATex"],["tex/metB.jpg","metBTex"]];for(c=0;c<b.length;c++)nTexs[b[c][1]]=THREE.ImageUtils.loadTexture(b[c][0])}
function allReady(){floorGeo=new THREE.BoxGeometry(10,10,10);poleGeo=new THREE.CylinderGeometry(2.5,2.5,20);poleGeo.applyMatrix((new THREE.Matrix4).makeRotationX(.5*Math.PI));wallGeo=new THREE.BoxGeometry(4,10,20);conMat=new THREE.MeshLambertMaterial({map:nTexs.groundTex});waterGeo=new THREE.PlaneGeometry(10,10);waterMat=new THREE.MeshLambertMaterial({color:21760,transparent:!0,opacity:.5});butGeo=new THREE.BoxGeometry(10,10,.1);butMatA=new THREE.MeshLambertMaterial({map:nTexs.metATex});butMatB=new THREE.MeshLambertMaterial({map:nTexs.metBTex});
detGeo=new THREE.BoxGeometry(9.2,9.2,9.2);detMatA=new THREE.MeshLambertMaterial({color:8918579,transparent:!0,opacity:.4});detMatB=new THREE.MeshLambertMaterial({color:13209,transparent:!0,opacity:.4});crate=new THREE.Mesh(new THREE.BoxGeometry(9,9,9),new THREE.MeshLambertMaterial({map:nTexs.boxTex}));scene.add(charMesh);scene.add(doorClose);scene.add(doorOpen);mainMenu()}function render(){renderer.render(scene,camera)}var gameData={},toggles={},keycode={};
function defaultControls(){keycode.up=38;keycode.down=40;keycode.left=37;keycode.right=39;keycode.restart=32;keycode.pause=80;localStorage.keycode=JSON.stringify(keycode);correctOpts();errHide()}function defaultToggles(){toggles.decor=!0;toggles.anim=!1;toggles.alias=!0;localStorage.toggles=JSON.stringify(toggles);correctOpts();errHide()}function defaultRender(){prefRender="WebGL";localStorage.prefRender=JSON.stringify(prefRender)}
function GLOpts(a){"hide"===a?document.getElementById("webglonly").style.display="none":"show"===a&&(document.getElementById("webglonly").style.display="block");vertCenter()}function toggleRender(){"WebGL"===prefRender?prefRender="Canvas":"Canvas"===prefRender?prefRender="Image":"Image"===prefRender&&(prefRender="WebGL");localStorage.prefRender=JSON.stringify(prefRender);correctOpts()}
function toggle(a){toggles[a]=!toggles[a];var b="toggle"+a;!1===toggles[a]?document.getElementById(b).innerHTML='<span class="disabled">DISABLED</span>':document.getElementById(b).innerHTML='<span class="enabled">ENABLED</span>';localStorage.toggles=JSON.stringify(toggles);!0===toggles.decor&&2!==loadedDecor&&(waitingFor="decor",loadDecor())}var changingKey,setKeyAction=0;
function changeKeycode(a){1===actionsEnabled?error("No changing keys while you&apos;re allowed to move too!",1):(error("Please press the key you would like to use for "+a+".",0,1),setKeyAction=1,changingKey=a,document.getElementById("blur-hack").focus())}function saveKeycode(a){setKeyAction=0;keycode[changingKey]=a;localStorage.keycode=JSON.stringify(keycode);document.getElementById("control"+changingKey).innerHTML=String.fromCharCode(a);errHide();changingKey=null}
function correctOpts(){document.getElementById("renderopt").innerHTML=prefRender;"WebGL"!==prefRender?GLOpts("hide"):GLOpts("show");for(var a=Object.keys(keycode),b=0;b<a.length;b++){var c=keycode[a[b]];document.getElementById("control"+a[b]).innerHTML=String.fromCharCode(c)}a=Object.keys(toggles);for(b=0;b<a.length;b++)c="toggle"+a[b],!0===toggles[a[b]]?document.getElementById(c).innerHTML='<span class="enabled">ENABLED</span>':document.getElementById(c).innerHTML='<span class="disabled">DISABLED</span>'}
function loadData(){localStorage.prefRender?prefRender=JSON.parse(localStorage.prefRender):defaultRender();if(localStorage.gameData){gameData=JSON.parse(localStorage.gameData);for(var a=Object.keys(packs),b=0;b<a.length;b++)"undefined"===typeof gameData[a[b]]&&(gameData[a[b]]={isComplete:!1,levsDone:[],Mmoves:[],Mpushes:[],Mrestarts:[],Pmoves:[],Ppushes:[],Prestarts:[]},gameData[a[b]].levsDone[0]=0)}else clearData();localStorage.keycode?keycode=JSON.parse(localStorage.keycode):defaultControls();localStorage.toggles?
toggles=JSON.parse(localStorage.toggles):defaultToggles();correctOpts()}function clearData(){var a=Object.keys(packs);gameData={};for(var b=0;b<a.length;b++)gameData[a[b]]={isComplete:!1,levsDone:[],Mmoves:[],Mpushes:[],Mrestarts:[],Pmoves:[],Ppushes:[],Prestarts:[]},gameData[a[b]].levsDone[0]=0;localStorage.gameData=JSON.stringify(gameData);errHide()}function resetVis(){defaultRender();defaultToggles()}function resetCon(){defaultControls()}
function deleteDat(){localStorage.custom=JSON.stringify([]);clearData();location.reload()}
function load(){JSONLoader=new THREE.JSONLoader;document.getElementById("loading").style.display="block";var a=THREE.ImageUtils.loadTexture("mods/door/norm.jpg"),b=THREE.ImageUtils.loadTexture("mods/door/map.jpg"),c=THREE.ImageUtils.loadTexture("mods/door/mapred.jpg"),d=new THREE.MeshPhongMaterial({ambient:new THREE.Color(.64,.64,.64),specular:new THREE.Color(0,0,0),color:new THREE.Color(.64,.64,.64),map:b,normalMap:a,shininess:50}),e=new THREE.MeshPhongMaterial({ambient:new THREE.Color(.64,.64,.64),
specular:new THREE.Color(0,0,0),color:new THREE.Color(.64,.64,.64),map:c,normalMap:a,shininess:50});JSONLoader.load("mods/door/doorClose.js",function(){return function(a){a.faceVertexUvs[1]=a.faceVertexUvs[0];doorClose=new THREE.Mesh(a,e);doorCloseDec=new THREE.Mesh(a,d);loadedModels+=1;doneCheck()}}());JSONLoader.load("mods/door/doorOpen.js",function(){return function(a){a.faceVertexUvs[1]=a.faceVertexUvs[0];doorOpen=new THREE.Mesh(a,d);loadedModels+=1;doneCheck()}}());JSONLoader.load("mods/guy/guy.js",
function(){return function(a){var b=new THREE.MeshPhongMaterial({ambient:new THREE.Color(.9,.9,.9),specular:new THREE.Color(0,0,0),color:new THREE.Color(.9,.9,.9),map:THREE.ImageUtils.loadTexture("mods/guy/tex.png"),normalMap:THREE.ImageUtils.loadTexture("mods/guy/norm.png"),specularMap:THREE.ImageUtils.loadTexture("mods/guy/spec.png"),shininess:50});a.faceVertexUvs[1]=a.faceVertexUvs[0];charMesh=new THREE.Mesh(a,b);loadedModels+=1;doneCheck()}}())}
function loadDecor(){document.getElementById("loading").style.display="block";for(var a="mods/barrel/rust.jpg mods/barrel/yellow.jpg mods/barrel/black.jpg mods/barrel/blue.jpg mods/barrel/green.jpg mods/barrel/grey.jpg mods/barrel/red.jpg".split(" "),b=THREE.ImageUtils.loadTexture("mods/barrel/norm.jpg"),c=THREE.ImageUtils.loadTexture("mods/barrel/spec.jpg"),d=[],e=0;e<a.length;e++)d.push(THREE.ImageUtils.loadTexture(a[e]));JSONLoader.load("mods/barrel/bGeo.js",function(){return function(a){a.faceVertexUvs[1]=
a.faceVertexUvs[0];for(var e=0;e<d.length;e++){var f=new THREE.MeshPhongMaterial({ambient:new THREE.Color(.8,.8,.8),specular:new THREE.Color(0,0,0),color:new THREE.Color(.7,.7,.7),map:d[e],normalMap:b,lightMap:c}),f=new THREE.Mesh(a,f);barCloners.push(f)}loadedDecor+=1;doneCheck()}}());for(var a=["mods/table/dirty.jpg","mods/table/rough.jpg","mods/table/weathered.jpg"],f=THREE.ImageUtils.loadTexture("mods/table/norm.jpg"),h=THREE.ImageUtils.loadTexture("mods/table/ao.jpg"),g=[],e=0;e<a.length;e++)g.push(THREE.ImageUtils.loadTexture(a[e]));
JSONLoader.load("mods/table/tGeo.js",function(){return function(a){a.faceVertexUvs[1]=a.faceVertexUvs[0];for(var b=0;b<g.length;b++){var c=new THREE.MeshPhongMaterial({ambient:new THREE.Color(.64,.64,.64),specular:new THREE.Color(0,0,0),color:new THREE.Color(.64,.64,.64),map:g[b],normalMap:f,lightMap:h,shininess:50}),c=new THREE.Mesh(a,c);tabCloners.push(c)}loadedDecor+=1;doneCheck()}}())}
function doneCheck(){"both"===waitingFor&&3===loadedModels&&2===loadedDecor?(allReady(),document.getElementById("loading").style.display="none"):"main"===waitingFor&&3===loadedModels?(allReady(),document.getElementById("loading").style.display="none"):"decor"===waitingFor&&2===loadedDecor&&(document.getElementById("loading").style.display="none")}
function canvasLoad(){var a=new THREE.Mesh(new THREE.CylinderGeometry(1,1,12)),b=new THREE.Mesh(new THREE.CylinderGeometry(1,1,12));a.position.set(1,1,6);a.rotation.set(.5*Math.PI,0,0);b.position.set(9,1,6);b.rotation.set(.5*Math.PI,0,0);var c=new THREE.Mesh(new THREE.CylinderGeometry(1,1,6));c.rotation.set(0,0,.5*Math.PI);c.position.set(5,1,11);var d=new THREE.Geometry;THREE.GeometryUtils.merge(d,a);THREE.GeometryUtils.merge(d,b);THREE.GeometryUtils.merge(d,c);doorOpen=new THREE.Mesh(d,new THREE.MeshLambertMaterial({color:30464}));
a=doorOpen.geometry.clone();b=new THREE.Mesh(new THREE.BoxGeometry(6,1,10));b.position.set(5,0,5);THREE.GeometryUtils.merge(a,b);doorClose=new THREE.Mesh(a,new THREE.MeshLambertMaterial({color:7798784}));a=new THREE.Mesh(new THREE.SphereGeometry(3,5,4));b=new THREE.Mesh(new THREE.SphereGeometry(1,3,2));b.position.set(1.5,-4,0);c=new THREE.Mesh(new THREE.SphereGeometry(1,3,2));c.position.set(1.5,4,0);d=new THREE.Mesh(new THREE.SphereGeometry(1,4,3));d.position.set(0,2,-4);var e=new THREE.Mesh(new THREE.SphereGeometry(1,
4,3));e.position.set(0,-2,-4);var f=new THREE.Geometry;THREE.GeometryUtils.merge(f,a);THREE.GeometryUtils.merge(f,b);THREE.GeometryUtils.merge(f,c);THREE.GeometryUtils.merge(f,d);THREE.GeometryUtils.merge(f,e);charMesh=new THREE.Mesh(f,new THREE.MeshLambertMaterial({color:5570645}))}function setDisp(a,b){document.getElementById(a).style.display=b}function setVis(a,b){document.getElementById(a).style.visibility=b}
function overlay(a){7===a?setDisp("overlay7","block"):3===a?setDisp("overlay3","block"):1===a&&setDisp("overlay1","block")}function unover(a){7===a?setDisp("overlay7","none"):3===a?setDisp("overlay3","none"):1===a&&setDisp("overlay1","none")}function actions(a){!0===a?(actionsEnabled=1,"Image"!==curRender&&(controls.enabled=!0)):(actionsEnabled=0,"Image"!==curRender&&(controls.enabled=!1))}var theresError=!1,canCloseError=!0;
function error(a,b,c,d){theresError=!0;setVis("error","visible");overlay(7);0===b?(setDisp("errclose","none"),canCloseError=!1):setDisp("errclose","block");1===c?(canCloseError=!0,setDisp("errhead","none")):setDisp("errhead","block");"viz"===d?(a="Are you sure you want to reset your visual settings?<br/>(You may need to refresh the page afterwards)",b='<button onclick="resetVis()">Reset Visual Settings</button>',document.getElementById("erraddtxt").innerHTML=b,setDisp("erraddtxt","block")):"con"===
d?(a="Are you sure you want to reset your controls?",b='<button onclick="resetCon()">Reset Controls</button>',document.getElementById("erraddtxt").innerHTML=b,setDisp("erraddtxt","block")):"del"===d&&(a="This will delete all your gamedata AND any custom stages you have added.  Are you absolutely sure?",b='<button onclick="deleteDat()">Delete Gamedata and Custom Levels</button>',document.getElementById("erraddtxt").innerHTML=b,setDisp("erraddtxt","block"));document.getElementById("errtxt").innerHTML=
a;vertCenter()}function errHide(){theresError=!1;setDisp("erraddtxt","none");document.getElementById("errtxt").innerHTML="";setVis("error","hidden");unover(7)}function mainMenu(){"Image"!==curRender?(clearAll(),render()):clearAll2d();isPaused=!1;setDisp("loadingPage","none");setDisp("page","block");makePacksTable();actions(!1);setDisp("hud","none");setVis("pause","hidden");setVis("main","visible");overlay(1);vertCenter()}var lastNavd="unnav",gameOnNav=!1;
function nav(a,b){"yes"===b&&(setDisp("page","block"),gameOnNav=!0,vertCenter());setVis(a,"visible");overlay(3);lastNavd=a}function unNav(){!0===gameOnNav&&(setDisp("page","none"),gameOnNav=!1);unover(3);setVis(lastNavd,"hidden");lastNavd="unnav"}var isPaused;function pause(){isPaused=!0;actions(!1);setVis("pause","visible");overlay(1);setDisp("page","block");vertCenter()}function unpause(){isPaused=!1;actions(!0);setVis("pause","hidden");unover(1);setDisp("page","none")}var curPack;
function play(a,b){unover(1);unover(3);curPack=b;setVis("main","hidden");setVis("pause","hidden");setVis("next","hidden");setVis("select","hidden");setDisp("page","none");setDisp("hud","block");setupBoard(a)}
function fixButtons(){0===gameData[curPack].levsDone[lastBoard+1]||1===gameData[curPack].levsDone[lastBoard+1]?setVis("right","visible"):setVis("right","hidden");0===gameData[curPack].levsDone[lastBoard-1]||1===gameData[curPack].levsDone[lastBoard-1]?setVis("left","visible"):setVis("left","hidden")}function makePacksTable(){createSelect();setDisp("levhelp","block");vertCenter()}
function viewPack(a){var b=document.querySelectorAll("#alllevels>div");setDisp("levhelp","none");for(var c=0;c<b.length;c++)b[c].style.display="none";setDisp(a+"-levsel","block");vertCenter()}var lastPage;
function viewPage(a,b){for(var c=document.querySelectorAll("#"+b+"-levsel div.list>div"),d=0;d<c.length;d++)"block"==c[d].style.display&&(c[d].style.display="none",lastPage=d+1);for(var e=document.querySelectorAll("#"+b+"-levsel div.listnav ul li a"),d=0;d<e.length;d++)e[d].className="";"left"===a?(a=lastPage-1,0===a&&(a=c.length)):"right"===a&&(a=lastPage+1,a===c.length+1&&(a=1));setDisp(b+"-p"+a,"block");document.getElementById(b+"-p"+a+"-nav").className="selected"}var lastHT=1;
function viewHT(a){"right"===a?(a=lastHT+1,5===a&&(a=1)):"left"===a&&(a=lastHT-1,0===a&&(a=4));for(var b=document.querySelectorAll("#howdivs>div"),c=0;c<b.length;c++)b[c].style.display="none";b=document.querySelectorAll("#how div.listnav ul li a");for(c=0;c<b.length;c++)b[c].className="";document.getElementById("how"+a+"-nav").className="selected";setDisp("how"+a,"block");lastHT=a}
function updateScores(){document.getElementById("moves").innerHTML=moves;document.getElementById("pushes").innerHTML=pushes;var a=document.getElementById("Mmoves"),b=document.getElementById("Mpushes"),c=document.getElementById("Pmoves"),d=document.getElementById("Ppushes");"undefined"===typeof gameData[curPack].Mmoves[lastBoard]?(a.innerHTML="-",b.innerHTML="-"):(a.innerHTML=gameData[curPack].Mmoves[lastBoard],b.innerHTML=gameData[curPack].Mpushes[lastBoard]);"undefined"===typeof gameData[curPack].Ppushes[lastBoard]?
(c.innerHTML="-",d.innerHTML="-"):(c.innerHTML=gameData[curPack].Pmoves[lastBoard],d.innerHTML=gameData[curPack].Ppushes[lastBoard])}
function onWin(){actions(!1);gameData[curPack].levsDone[lastBoard]=1;document.getElementById("endMoves").innerHTML=moves;document.getElementById("endPushes").innerHTML=pushes;saveBestPushes();setVis("next","visible");packs[curPack].level[lastBoard+1]?(1!==gameData[curPack].levsDone[lastBoard+1]&&(gameData[curPack].levsDone[lastBoard+1]=0),setDisp("nl","block"),setDisp("eg","none"),document.getElementById("nl").focus()):(setDisp("eg","block"),setDisp("nl","none"));!0===isItCompleted()&&(gameData[curPack].isComplete=
!0);createSelect();viewPack(curPack);localStorage.gameData=JSON.stringify(gameData)}
function saveBestPushes(){"undefined"===typeof gameData[curPack].Mmoves[lastBoard]?gameData[curPack].Mmoves[lastBoard]=moves:moves<gameData[curPack].Mmoves[lastBoard]?(gameData[curPack].Mmoves[lastBoard]=moves,gameData[curPack].Mpushes[lastBoard]=pushes,gameData[curPack].Mrestarts[lastBoard]=restarts):moves===gameData[curPack].Mmoves[lastBoard]&&pushes<gameData[curPack].Mpushes[lastBoard]?(gameData[curPack].Mmoves[lastBoard]=moves,gameData[curPack].Mpushes[lastBoard]=pushes,gameData[curPack].Mrestarts[lastBoard]=
restarts):moves===gameData[curPack].Mmoves[lastBoard]&&pushes===gameData[curPack].Mpushes[lastBoard]&&restarts<gameData[curPack].Mrestarts[lastBoard]&&(gameData[curPack].Mmoves[lastBoard]=moves,gameData[curPack].Mpushes[lastBoard]=pushes,gameData[curPack].Mrestarts[lastBoard]=restarts);"undefined"===typeof gameData[curPack].Pmoves[lastBoard]&&(gameData[curPack].Pmoves[lastBoard]=moves);"undefined"===typeof gameData[curPack].Mpushes[lastBoard]&&(gameData[curPack].Mpushes[lastBoard]=pushes);"undefined"===
typeof gameData[curPack].Ppushes[lastBoard]?gameData[curPack].Ppushes[lastBoard]=pushes:pushes<gameData[curPack].Ppushes[lastBoard]?(gameData[curPack].Pmoves[lastBoard]=moves,gameData[curPack].Ppushes[lastBoard]=pushes,gameData[curPack].Prestarts[lastBoard]=restarts):pushes===gameData[curPack].Ppushes[lastBoard]&&moves<gameData[curPack].Pmoves[lastBoard]?(gameData[curPack].Pmoves[lastBoard]=moves,gameData[curPack].Ppushes[lastBoard]=pushes,gameData[curPack].Prestarts[lastBoard]=restarts):pushes===
gameData[curPack].Ppushes[lastBoard]&&moves===gameData[curPack].Pmoves[lastBoard]&&restarts<gameData[curPack].Prestarts[lastBoard]&&(gameData[curPack].Pmoves[lastBoard]=moves,gameData[curPack].Ppushes[lastBoard]=pushes,gameData[curPack].Prestarts[lastBoard]=restarts);"undefined"===typeof gameData[curPack].Mrestarts[lastBoard]&&(gameData[curPack].Mrestarts[lastBoard]=restarts);"undefined"===typeof gameData[curPack].Prestarts[lastBoard]&&(gameData[curPack].Prestarts[lastBoard]=restarts)}
function numOfComplete(a){for(var b=0,c=0;c<a.length;++c)1==a[c]&&b++;return b}function isItCompleted(){if(gameData[curPack].levsDone.length===packs[curPack].level.length)for(var a=0;a<gameData[curPack].levsDone.length;a++){if(0===gameData[curPack].levsDone[a])return!1;if(a===packs[curPack].level.length-1)return!0}else return!1}function restart(){actions(!0);document.getElementById("next").style.visibility="hidden";"Image"!==curRender?resetBoard():resetBoard2d()}
function nextlev(){document.getElementById("next").style.visibility="hidden";setupBoard(lastBoard+1)}function prevlev(){document.getElementById("next").style.visibility="hidden";setupBoard(lastBoard-1)}var parseMaze=1;function sokonly(a){0===a?(document.getElementById("SOKonly").style.display="none",parseMaze=1):(document.getElementById("SOKonly").style.display="block",parseMaze=0);vertCenter()}
function createSelect(){for(var a=Object.keys(packs),b=0,c="<table><tr><th>Pack</th><th>Author</th><th></th></tr>",d="<table><tr><th>Pack</th><th>Author</th><th></th></tr>",e="<table><tr><th>Pack</th><th>Author</th><th></th></tr>",f="",h,g=0;g<a.length;g++)h=numOfComplete(gameData[a[g]].levsDone),f="<tr onclick=\"viewPack('"+a[g]+"')\"",!0===gameData[a[g]].isComplete&&(f+=' class="completed"'),f+=">",f+='<td><a href="#">'+packs[a[g]].displayName+"</a></td>",f+="<td>"+packs[a[g]].author+"</td>",f+=
'<td class="endot',f+='">'+h+"/"+packs[a[g]].level.length+"</td>",f+="</tr>","soko"===packs[a[g]].type?d+=f:"maze"===packs[a[g]].type?c+=f:"custom"===packs[a[g]].type&&(b=1,e+=f);c+="</table>";d+="</table>";e+="</table>";document.getElementById("mazes").innerHTML=c;document.getElementById("soko").innerHTML=d;1===b?(setDisp("custom","block"),document.getElementById("customtable").innerHTML=e):setDisp("custom","none");f="";for(g=0;g<a.length;g++){f+='<div id="'+a[g]+'-levsel" style="display:none">';
f+="<h3>"+packs[a[g]].displayName+"</h3>";b='<div class="list">';c="";for(e=d=0;e<packs[a[g]].level.length;e++)h=e+1,0===e?(d+=1,b+='<div id="'+a[g]+"-p"+d+'" style="display:block"><ol>'):0===e%30&&(d+=1,b+='</div><div id="'+a[g]+"-p"+d+'" style="display:none">'),0===e%6&&0!==e&&(b+="</ol><ol>"),b+="<li>","undefined"===typeof gameData[a[g]].levsDone[e]||1!==gameData[a[g]].levsDone[e]&&0!==gameData[a[g]].levsDone[e]?b+="<span>"+h+"</span>":(b+='<a href="#" onclick="play('+e+",'"+a[g]+"')\"",1===gameData[a[g]].levsDone[e]&&
(b+='class="comp"'),b+=">"+h+"</a>"),b+="</li>";b+="</ol></div></div>";f+=b;if(1<d){c+='<div class="listnav"><div><a href="#" class="left" onclick="viewPage(\'left\',\''+a[g]+"')\"></a><ul>";for(e=0;e<d;e++)c=0===e?c+('<li><a href="#" class="selected" onclick="viewPage('+(e+1)+",'"+a[g]+'\')" id="'+a[g]+"-p"+(e+1)+'-nav"></a></li>'):c+('<li><a href="#" onclick="viewPage('+(e+1)+",'"+a[g]+'\')" id="'+a[g]+"-p"+(e+1)+'-nav"></a></li>');c+='</ul><a href="#" class="right" onclick="viewPage(\'right\',\''+
a[g]+"')\"></a></div></div>"}f+=c;f+="</div>"}document.getElementById("alllevels").innerHTML=f};